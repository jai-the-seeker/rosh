<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<title data-react-helmet="true">curl | Musings</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="curl | Musings"><meta data-react-helmet="true" name="description" content="* HTTP Authentication"><meta data-react-helmet="true" property="og:description" content="* HTTP Authentication"><meta data-react-helmet="true" property="og:url" content="https://jai-the-seeker.github.io/rosh/docs/hunting/utilities/curl"><link data-react-helmet="true" rel="shortcut icon" href="/rosh/img/symbol.png"><link data-react-helmet="true" rel="canonical" href="https://jai-the-seeker.github.io/rosh/docs/hunting/utilities/curl"><link rel="stylesheet" href="/rosh/styles.cadbe1e8.css">
<link rel="preload" href="/rosh/styles.732cfda7.js" as="script">
<link rel="preload" href="/rosh/runtime~main.6a207153.js" as="script">
<link rel="preload" href="/rosh/main.331acb28.js" as="script">
<link rel="preload" href="/rosh/1.8a5062f9.js" as="script">
<link rel="preload" href="/rosh/2.2de74e1c.js" as="script">
<link rel="preload" href="/rosh/3.98b09a97.js" as="script">
<link rel="preload" href="/rosh/1be78505.81b77194.js" as="script">
<link rel="preload" href="/rosh/44.f4576be6.js" as="script">
<link rel="preload" href="/rosh/5908942f.232a804b.js" as="script">
<link rel="preload" href="/rosh/c6f981c1.fe6548ef.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/rosh/"><img class="navbar__logo" src="/rosh/img/symbol.png" alt="My Site Logo"><strong class="navbar__title">Musings</strong></a><a class="navbar__item navbar__link" href="/rosh/docs/hunting/field-manual">Red Hunters</a><a class="navbar__item navbar__link" href="/rosh/docs/web_security/sessions">Web Security</a><a class="navbar__item navbar__link" href="/rosh/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a activeclassname="navbar__link--active" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/rosh/"><img class="navbar__logo" src="/rosh/img/symbol.png" alt="My Site Logo"><strong class="navbar__title">Musings</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/rosh/docs/hunting/field-manual">Red Hunters</a></li><li class="menu__list-item"><a class="menu__link" href="/rosh/docs/web_security/sessions">Web Security</a></li><li class="menu__list-item"><a class="menu__link" href="/rosh/blog">Blog</a></li><li class="menu__list-item"><a activeclassname="navbar__link--active" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Hunting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/field-manual">Red Hunters Field Manual</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Network Recon</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/network_recon/proxy">Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/network_recon/SMTP">SMTP</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Scripts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/scripts/bash_scripts">Bash Scripts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/scripts/python_scripts">Python Scripts</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Utilities</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/rosh/docs/hunting/utilities/curl">curl</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rosh/docs/hunting/utilities/nc">nc</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rosh/docs/hunting/utilities/nmap">nmap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rosh/docs/hunting/utilities/ssh">ssh</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rosh/docs/hunting/utilities/tshark">tshark</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Web</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/web/sql_injection">SQL Injection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/web/web_recon">Web Recon</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Misc</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/forensics">Forensics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/linux_deb_backdoor">linux_deb_backdoor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/linux_priv_esc">Linux Privilege Escalation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/MITRE">MITRE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/password_cracking">Password Cracking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/persistence">persistence</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Vulnhub</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/vulnhub/DC-9">DC-9</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">OverTheWire</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rosh/docs/hunting/bandit">bandit</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">curl</h1></header><div class="markdown"><ul><li><a href="#http-authentication">HTTP Authentication</a><ul><li><a href="#http-basic-authentication">HTTP basic authentication</a></li><li><a href="#digest-authentication">Digest Authentication</a></li><li><a href="#token-authentication">Token Authentication</a></li></ul></li><li><a href="#perform-an-http-get-request">Perform an HTTP GET request</a></li><li><a href="#http-response-headers">HTTP Response Headers</a><ul><li><a href="#response-headers-i">response headers <code>i</code></a></li><li><a href="#only-response-headers-I">Only response headers <code>I</code></a></li></ul></li><li><a href="#perform-an-http-post-request">Perform an HTTP POST request</a></li><li><a href="#perform-an-http-post-request-sending-json">Perform an HTTP POST request sending JSON</a></li><li><a href="#perform-an-http-put-request">Perform an HTTP PUT request</a></li><li><a href="#follow-a-redirect">Follow a redirect</a></li><li><a href="#store-the-response-to-a-file">Store the response to a file</a></li><li><a href="#set-a-different-user-agent">Set a different User Agent</a></li><li><a href="#inspecting-all-the-details-of-the-request-and-the-response">Inspecting all the details of the request and the response</a></li><li><a href="#proxy">Proxy <code>-x</code></a><ul><li><a href="#username-and-password-for-proxy">username and password for proxy</a></li><li><a href="#username-and-password-for-HTTP-server">username and password for HTTP server</a></li></ul></li><li><a href="#copying-any-browser-network-request-to-a-curl-command">Copying any browser network request to a curl command</a></li></ul><p>Refs</p><ul><li><a href="https://flaviocopes.com/http-curl/">https://flaviocopes.com/http-curl/</a></li><li><a href="https://curl.haxx.se/docs/manual.html">https://curl.haxx.se/docs/manual.html</a></li></ul><h1 id="http-authentication">HTTP Authentication</h1><h2 id="http-basic-authentication">HTTP basic authentication</h2><p>If a resource requires Basic HTTP Authentication, you can use the <code>u</code> option to pass the <code>user:password values</code>:</p><pre><code class="language-sh">curl -u user:pass https://flaviocopes.com/
curl -u bob:qwerty http://192.165.34.3/dir/
</code></pre><h2 id="digest-authentication">Digest Authentication</h2><pre><code class="language-sh">curl --digest -u alice:password1 http://192.165.34.3/poc/
</code></pre><h2 id="token-authentication">Token Authentication</h2><p>We have to set the token in headers for token authentication to work.</p><pre><code class="language-sh">curl -H &#x27;Authorization: Token &lt;token&gt;&#x27; 192.183.171.3
</code></pre><p>We have to write a custom wrapper around this command. In the script, we will rely on the fact
that on using the correct token, we will get something else than &quot;Unauthorized Access&quot;.</p><p>You can refer this script <a href="https://github.com/jai-the-seeker/CTF-OSCP/blob/master/scripts.md#authorization-token">https://github.com/jai-the-seeker/CTF-OSCP/blob/master/scripts.md#authorization-token</a></p><p>After performing the dictionary attack we will get the password, which can be used to set the token in the headers</p><pre><code class="language-sh"># -H, --header &lt;header/@file&gt; Pass custom header(s) to server
curl -H &#x27;Authorization: Token 123123123&#x27; 192.186.248.3
</code></pre><h1 id="perform-an-http-get-request">Perform an HTTP GET request</h1><p>When you perform a request, curl will return the body of the response:</p><pre><code class="language-sh">curl https://flaviocopes.com/
</code></pre><h1 id="http-response-headers">HTTP response headers</h1><h2 id="response-headers-i">response headers <code>i</code></h2><p>By default the response headers are hidden in the output of curl. To show them, use the <code>i</code> option:</p><pre><code class="language-sh">curl -i https://flaviocopes.com/
</code></pre><h2 id="only-response-headers-i">Only response headers <code>I</code></h2><p>Using the <code>I</code> option, you can get only the headers, and not the response body:</p><pre><code class="language-sh">curl -I https://flaviocopes.com/
</code></pre><h1 id="perform-an-http-post-request">Perform an HTTP POST request</h1><p>The <code>X</code> option lets you change the <code>HTTP</code> method used. By default, <code>GET</code> is used, and it’s the same as writing</p><pre><code class="language-sh">curl -X GET https://flaviocopes.com/
</code></pre><p>Using <code>-X POST</code> will perform a <code>POST</code> request. You can perform a POST request passing data URL encoded:</p><pre><code class="language-sh">curl -d &quot;option=value&amp;something=anothervalue&quot; -X POST https://flaviocopes.com/
</code></pre><p>In this case, the <code>application/x-www-form-urlencoded Content-Type</code> is sent.</p><h1 id="perform-an-http-post-request-sending-json">Perform an HTTP POST request sending JSON</h1><p>Instead of posting data URL-encoded, like in the example above, you might want to send JSON. In this case you need to explicitly set the Content-Type header, by using the <code>H</code> option:</p><pre><code class="language-sh">curl -d &#x27;{&quot;option&quot;: &quot;value&quot;, &quot;something&quot;: &quot;anothervalue&quot;}&#x27; -H &quot;Content-Type: application/json&quot; -X POST https://flaviocopes.com/
</code></pre><p>You can also send a JSON file from your disk:</p><pre><code class="language-sh">curl -d &quot;@my-file.json&quot; -X POST https://flaviocopes.com/
</code></pre><h1 id="perform-an-http-put-request">Perform an HTTP PUT request</h1><p>The concept is the same as for <code>POST</code> requests, just change the <code>HTTP method</code> using <code>-X PUT</code></p><h1 id="follow-a-redirect">Follow a redirect</h1><p>A redirect response like 301, which specifies the Location response header, can be automatically followed by specifying the <code>L</code> option:</p><pre><code class="language-sh">curl http://flaviocopes.com/
</code></pre><p>will not follow automatically to the HTTPS version which I set up to redirect to, but this will:</p><pre><code class="language-sh">curl -L http://flaviocopes.com/
</code></pre><h1 id="store-the-response-to-a-file">Store the response to a file</h1><p>Using the <code>o</code> option you can tell curl to save the response to a file:</p><pre><code class="language-sh">curl -o file.html https://flaviocopes.com/
</code></pre><p>You can also just save a file by its name on the server, using the O option:</p><pre><code class="language-sh">curl -O https://flaviocopes.com/index.html
</code></pre><h1 id="set-a-different-user-agent">Set a different User Agent</h1><p>The user agent tells the server which client is performing the request. By default curl sends the <code>curl/&lt;version&gt; user agent, like: curl/7.54.0.</code></p><p>You can specify a different user agent using the <code>--user-agent</code> option:</p><pre><code class="language-sh">curl --user-agent &quot;my-user-agent&quot; https://flaviocopes.com
</code></pre><h1 id="inspecting-all-the-details-of-the-request-and-the-response">Inspecting all the details of the request and the response</h1><p>Use the <code>--verbose</code> option to make curl output all the details of the request, and the response:</p><pre><code class="language-sh">curl --verbose -I https://flaviocopes.com/
</code></pre><h1 id="proxy">proxy</h1><pre><code class="language-sh">-x, --proxy [protocol://]host[:port]
curl -x 192.201.208.3:3128 127.0.0.1
</code></pre><p>The proxy string can be specified with a protocol:// prefix. No protocol specified or http:// will be treated as HTTP proxy. Use socks4://, socks4a://, socks5:// or socks5h:// to request a specific SOCKS version to be used.</p><h2 id="username-and-password-for-proxy">username and password for proxy</h2><p>In order to pass the credentials to the proxy server, we can use the curl option <code>-U</code>. Therefore, the following command will work:</p><pre><code class="language-sh">curl -U admin:laurie -x 192.173.117.3:3128 127.0.0.1:1996
</code></pre><p>Alternatively,</p><pre><code class="language-sh"># curl -x &lt;[protocol://][user:password@]proxyhost[:port]&gt; url
# Example 1
curl -x http://user:password@proxy-IP-here:port url-of-website:port
# Example 2
curl -x admin:laurie@192.142.49.3:3128 127.0.0.1:1996
</code></pre><h2 id="username-and-password-for-http-server">username and password for HTTP server</h2><pre><code class="language-sh"># Get a file from an HTTP server that requires user and password, using the proxy:
curl -u user:passwd -x my-proxy:888 http://www.get.this/
</code></pre><p>The curl <code>-u</code> option is used to specify credentials for the <em>target</em> server authentication and not for the <em>proxy</em> server authentication.</p><p>For e.g, when you are using the command <code>curl -u admin:laurie -x 192.173.117.3:3128 127.0.0.1:1996</code>. The credentials <code>admin:laurie</code> are <em>not</em> being passed as credentials to the proxy server, instead, they are passed as a part of the request which is supposed to be forwarded to the target server.  The option value will be considered as credentials for the target server authentication and not for the proxy authentication.</p><p>The above command will work in the scenario where the proxy server is configured without authentication, but the target server is protected with authentication (basic/digest authentication). This way, the connection will be forwarded by the proxy server and the credentials will be used to authenticate with the target server.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rosh/docs/hunting/scripts/python_scripts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Python Scripts</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rosh/docs/hunting/utilities/nc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">nc »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#http-basic-authentication" class="table-of-contents__link">HTTP basic authentication</a></li><li><a href="#digest-authentication" class="table-of-contents__link">Digest Authentication</a></li><li><a href="#token-authentication" class="table-of-contents__link">Token Authentication</a></li><li><a href="#response-headers-i" class="table-of-contents__link">response headers <code>i</code></a></li><li><a href="#only-response-headers-i" class="table-of-contents__link">Only response headers <code>I</code></a></li><li><a href="#username-and-password-for-proxy" class="table-of-contents__link">username and password for proxy</a></li><li><a href="#username-and-password-for-http-server" class="table-of-contents__link">username and password for HTTP server</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Videos</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item">Youtube</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item">Github</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social Media</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item">Twitter</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 jai-the-seeker.</div></div></div></footer></div>
<script src="/rosh/styles.732cfda7.js"></script>
<script src="/rosh/runtime~main.6a207153.js"></script>
<script src="/rosh/main.331acb28.js"></script>
<script src="/rosh/1.8a5062f9.js"></script>
<script src="/rosh/2.2de74e1c.js"></script>
<script src="/rosh/3.98b09a97.js"></script>
<script src="/rosh/1be78505.81b77194.js"></script>
<script src="/rosh/44.f4576be6.js"></script>
<script src="/rosh/5908942f.232a804b.js"></script>
<script src="/rosh/c6f981c1.fe6548ef.js"></script>
</body>
</html>